# æä¸€ä¸‹V8s
äº†è§£V8å¼•æ“ä¹‹å‰æˆ‘ä»¬å…ˆè¦çŸ¥é“ä»€ä¹ˆæ˜¯javascriptå¼•æ“ã€‚ç®€å•æ¥è¯´,CPUå¹¶ä¸è®¤è¯†æˆ‘ä»¬çš„jsä»£ç ,è€Œä¸åŒçš„CPUåªè®¤è¯†è‡ªå·±å¯¹åº”çš„æŒ‡ä»¤é›†
javascriptå¼•æ“å°†jsä»£ç ç¼–è¯‘æˆCPUè®¤è¯†çš„æŒ‡ä»¤é›†,å½“ç„¶é™¤äº†ç¼–è¯‘ä¹‹å¤–è¿˜è¦è´Ÿè´£æ‰§è¡Œä»¥åŠå†…å­˜çš„ç®¡ç†ã€‚
å¤§å®¶éƒ½çŸ¥é“jsæ˜¯è§£é‡Šå½¢è¯­è¨€,ç”±å¼•æ“ç›´æ¥è¯»å–æºç ,ä¸€è¾¹ç¼–è¯‘ä¸€è¾¹æ‰§è¡Œ,è¿™æ ·æ•ˆç‡ç›¸å¯¹è¾ƒä½,è€Œç¼–è¯‘å½¢è¯­è¨€ï¼ˆå¦‚c++ï¼‰æ˜¯æŠŠæºç ç›´æ¥ç¼–è¯‘æˆå¯ç›´æ¥æ‰§è¡Œçš„ä»£ç æ‰§è¡Œæ•ˆç‡æ›´é«˜ã€‚

## ä»‹ç»
JSæ˜¯è„šæœ¬è¯­è¨€,è„šæœ¬è¯­è¨€éƒ½éœ€è¦ä¸€ä¸ªè§£æå™¨æ‰èƒ½è¿è¡Œã€‚å¯¹äºå†™åœ¨HTMLé¡µé¢é‡Œçš„JS,æµè§ˆå™¨å……å½“äº†è§£æå™¨çš„è§’è‰²ã€‚è€Œå¯¹äºéœ€è¦ç‹¬ç«‹è¿è¡Œçš„JS,
NodeJSå°±æ˜¯ä¸€ä¸ªè§£æå™¨ã€‚

# nodeå¤§è‡´åŸç†ï¼šhttps://zhuanlan.zhihu.com/p/145413875
1:ï¼šNode.jsæ˜¯ä¸€ä¸ªJavascriptè¿è¡Œç¯å¢ƒ
2ï¼šä¾èµ–äºChrome V8å¼•æ“è¿›è¡Œä»£ç è§£é‡Š
3ï¼šäº‹ä»¶é©±åŠ¨
4ï¼šéé˜»å¡I/O
5ï¼šè½»é‡ã€å¯ä¼¸ç¼©,é€‚äºå®æ—¶æ•°æ®äº¤äº’åº”ç”¨
6ï¼šå•è¿›ç¨‹,å•çº¿ç¨‹

# äº‹ä»¶é©±åŠ¨
Nodeé‡‡ç”¨äº‹ä»¶é©±åŠ¨çš„è¿è¡Œæ–¹å¼ã€‚ä¸è¿‡nginxå¼å¤šè¿›ç¨‹å•çº¿ç¨‹ï¼Œè€ŒNodeé€šè¿‡äº‹ä»¶é©±åŠ¨çš„æ–¹å¼å¤„ç†è¯·æ±‚æ—¶æ— éœ€ä¸ºæ¯ä¸€ä¸ªè¯·æ±‚åˆ›å»ºé¢å¤–çš„çº¿ç¨‹ã€‚
åœ¨äº‹ä»¶é©±åŠ¨çš„æ¨¡å‹å½“ä¸­ï¼Œæ¯ä¸€ä¸ªIOå·¥ä½œè¢«æ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œçº¿ç¨‹å¾ªç¯åœ°å¤„ç†é˜Ÿåˆ—ä¸Šçš„å·¥ä½œä»»åŠ¡ï¼Œå½“æ‰§è¡Œè¿‡ç¨‹ä¸­é‡åˆ°æ¥å µå¡(è¯»å–æ–‡ä»¶ã€æŸ¥è¯¢æ•°æ®åº“)æ—¶ï¼Œ
çº¿ç¨‹ä¸ä¼šåœä¸‹æ¥ç­‰å¾…ç»“æœï¼Œè€Œæ˜¯ç•™ä¸‹ä¸€ä¸ªå¤„ç†ç»“æœçš„å›è°ƒå‡½æ•°ï¼Œè½¬è€Œç»§ç»­æ‰§è¡Œé˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚
è¿™ä¸ªä¼ é€’åˆ°é˜Ÿåˆ—ä¸­çš„å›è°ƒå‡½æ•°åœ¨å µå¡ä»»åŠ¡è¿è¡Œç»“æŸåæ‰è¢«çº¿ç¨‹è°ƒç”¨
å‰é¢ä¹Ÿè¯´è¿‡Node Async IO = CPS + Callbackï¼Œè¿™ä¸€å¥—å®ç°å¼€å§‹äºNodeå¼€å§‹å¯åŠ¨çš„è¿›ç¨‹ï¼Œåœ¨è¿™ä¸ªè¿›ç¨‹ä¸­Nodeä¼šåˆ›å»ºä¸€ä¸ªå¾ªç¯ï¼Œ
æ¯æ¬¡å¾ªç¯è¿è¡Œå°±æ˜¯ä¸€ä¸ªTickå‘¨æœŸï¼Œæ¯ä¸ªTickå‘¨æœŸä¸­ä¼šä»äº‹ä»¶é˜Ÿåˆ—æŸ¥çœ‹æ˜¯å¦æœ‰äº‹ä»¶éœ€è¦å¤„ç†ï¼Œå¦‚æœæœ‰å°±å–å‡ºäº‹ä»¶å¹¶æ‰§è¡Œç›¸å…³çš„å›è°ƒå‡½æ•°ã€‚
äº‹ä»¶é˜Ÿåˆ—äº‹ä»¶å…¨éƒ¨æ‰§è¡Œå®Œæ¯•ï¼Œnodeåº”ç”¨å°±ä¼šç»ˆæ­¢ã€‚Nodeå¯¹äºå µå¡IOçš„å¤„ç†åœ¨å¹•åä½¿ç”¨çº¿ç¨‹æ± æ¥ç¡®ä¿å·¥ä½œçš„æ‰§è¡Œã€‚
Nodeä»æ± ä¸­å–å¾—ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œå¤æ‚ä»»åŠ¡ï¼Œè€Œä¸å ç”¨ä¸»å¾ªç¯çº¿ç¨‹ã€‚è¿™æ ·å°±é˜²æ­¢å µå¡IOå ç”¨ç©ºé—²èµ„æºã€‚
å½“å µå¡ä»»åŠ¡æ‰§è¡Œå®Œæ¯•é€šè¿‡æ·»åŠ åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­çš„å›è°ƒå‡½æ•°æ¥å¤„ç†æ¥ä¸‹æ¥çš„å·¥ä½œã€‚
è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆNode.jsé‡‡ç”¨JavaScriptå•çº¿ç¨‹è¯­è¨€ï¼Œæ¥åšåˆ°éé˜»å¡I/Oï¼ŒåŒæ—¶å¤„ç†ä¸‡çº§çš„å¹¶å‘è€Œä¸ä¼šé€ æˆI/Oé˜»å¡çš„åŸå› 

2023-09-25-15-29-04.png

#å¹¶å‘ï¼ˆConcurrencyï¼‰ï¼š
æ˜¯æŒ‡åœ¨ä¸€ä¸ªç³»ç»Ÿä¸­ï¼Œæ‹¥æœ‰å¤šä¸ªè®¡ç®—ï¼Œè¿™äº›è®¡ç®—æœ‰åŒæ—¶æ‰§è¡Œçš„ç‰¹æ€§ï¼Œè€Œä¸”ä»–ä»¬ä¹‹é—´æœ‰ç€æ½œåœ¨çš„äº¤äº’ã€‚
ğŸŒ°ğŸŒ°æ¯”å¦‚â€œæˆ‘ä»¬åƒé¥­åƒåˆ°ä¸€åŠï¼Œç”µè¯æ¥äº†ï¼Œæˆ‘ä»¬åœäº†ä¸‹æ¥æ¥äº†ç”µè¯ï¼Œæ¥å®Œåç»§ç»­åƒé¥­ï¼Œè¿™è¯´æ˜æ”¯æŒå¹¶å‘ã€‚

## I/O é˜»å¡
Node.jsé‡åˆ°I/Oäº‹ä»¶,å¹¶ä¸ä¼šå…ˆå¤„ç†,è€Œæ˜¯å…ˆæ”¾åœ¨äº‹ä»¶é˜Ÿåˆ—ä¸­,ä¸»çº¿ç¨‹ä¾ç„¶ç»§ç»­å¾€ä¸‹æ‰§è¡Œ,åˆ©ç”¨å¼‚æ­¥æ“ä½œæ¥å¤„ç†äº‹ä»¶é˜Ÿåˆ—ä¸­çš„äº‹æƒ…

![](2023-09-25-15-30-04.png)


# åˆ†å¸ƒå¼
å°†ç³»ç»Ÿçš„ä¸€ä¸ªéƒ¨åˆ†æ‹†åˆ†æˆä¸€ä¸ªå•ç‹¬çš„æœåŠ¡ï¼Œç³»ç»Ÿå†…éƒ¨æœåŠ¡é—´å¯è¿›è¡Œç›¸äº’çš„è°ƒç”¨ï¼Œç³»ç»Ÿå¯¹å¤–ä»å½¢æˆä¸€ä¸ªæ•´ä½“

# åˆ†å¸ƒå¼ç¼“å­˜
å‡è®¾æˆ‘ä»¬çš„ç³»ç»Ÿä¸­å­˜åœ¨å¤šä¸ªåº”ç”¨èŠ‚ç‚¹ï¼Œå®¢æˆ·ç«¯å‘å‡ºä¸€ä¸ªè¯·æ±‚å­˜å‚¨ä¸€äº›æ•°æ®ï¼Œè´Ÿè½½å‡è¡¡å°†è¯·æ±‚åˆ†å‘ç»™æŸä¸ªåº”ç”¨èŠ‚ç‚¹ï¼Œ
æ­¤æ—¶å¦‚æœæœªä½¿ç”¨åˆ†å¸ƒå¼ç¼“å­˜ï¼Œè¯¥èŠ‚ç‚¹å°†æ•°æ®ç¼“å­˜åœ¨è‡ªå·±nodeè¿›ç¨‹çš„å†…å­˜ä¸­ï¼Œå½“å®¢æˆ·ç«¯å†æ¬¡è¯·æ±‚æ‹‰å–è¯¥æ•°æ®æ—¶ï¼Œ
æ­¤æ—¶è´Ÿè½½å‡è¡¡ä»ä¼šéšæœºåˆ†å‘è¯·æ±‚ç»™ä¸€ä¸ªåº”ç”¨èŠ‚ç‚¹ï¼Œè€Œå¦‚æœæ­¤æ—¶æ”¶åˆ°è¯·æ±‚çš„èŠ‚ç‚¹å’Œä¹‹å‰å­˜å‚¨è¯·æ±‚æ—¶ä¸ä¸€è‡´ï¼Œåˆ™è¯¥èŠ‚ç‚¹ä¸­æ— å¯¹åº”æ•°æ®ï¼Œå¯¼è‡´æ•°æ®æ‹‰å–å¤±è´¥ã€‚
å¯è§æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¯¹åº”ç”¨é›†ç¾¤ä¸­å¿ƒåŒ–çš„å­˜å‚¨æ¥è§£å†³æ­¤ç±»é—®é¢˜

2023-09-25-15-56-26.png


#æ¶ˆæ¯é˜Ÿåˆ—


# æ€»ç»“
1ã€æ¯ä¸ªNode.jsè¿›ç¨‹åªæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹åœ¨æ‰§è¡Œç¨‹åºä»£ç ã€‚
2ã€å½“ç”¨æˆ·çš„ç½‘ç»œè¯·æ±‚æˆ–è€…å…¶å®ƒçš„å¼‚æ­¥æ“ä½œåˆ°æ¥æ—¶ï¼ŒNode.jséƒ½ä¼šæŠŠå®ƒæ”¾åˆ°â€œäº‹ä»¶é˜Ÿåˆ—â€ä¹‹ä¸­ï¼Œå¹¶ä¸ä¼šç«‹å³æ‰§è¡Œå®ƒï¼Œä»£ç å°±ä¸ä¼šè¢«é˜»å¡ï¼Œä¸»çº¿ç¨‹ç»§ç»­å¾€ä¸‹èµ°ï¼Œç›´åˆ°ä¸»çº¿ç¨‹ä»£ç æ‰§è¡Œå®Œæ¯•ã€‚
3ã€å½“ä¸»çº¿ç¨‹ä»£ç æ‰§è¡Œå®Œæ¯•å®Œæˆåï¼Œé€šè¿‡äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œä»â€œäº‹ä»¶é˜Ÿåˆ—â€çš„å¼€å¤´å–å‡ºä¸€ä¸ªäº‹ä»¶ï¼Œä»çº¿ç¨‹æ± ä¸­åˆ†é…ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œè¿™ä¸ªäº‹ä»¶ï¼Œæ¥ä¸‹æ¥ç»§ç»­å–å‡ºç¬¬äºŒä¸ªäº‹ä»¶ï¼Œå†ä»çº¿ç¨‹æ± ä¸­åˆ†é…ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œï¼Œä¸€ç›´æ‰§è¡Œåˆ°äº‹ä»¶é˜Ÿåˆ—çš„å°¾éƒ¨ã€‚æœŸé—´ä¸»çº¿ç¨‹ä¸æ–­çš„æ£€æŸ¥äº‹ä»¶é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰æœªæ‰§è¡Œçš„äº‹ä»¶ï¼Œç›´åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­æ‰€æœ‰äº‹ä»¶éƒ½æ‰§è¡Œå®Œï¼Œæ­¤åæ¯å½“æœ‰æ–°çš„äº‹ä»¶åŠ å…¥åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œéƒ½ä¼šé€šçŸ¥ä¸»çº¿ç¨‹æŒ‰é¡ºåºå–å‡ºäº¤ä»£ç å¾ªç¯å¤„ç†ã€‚å½“æœ‰äº‹ä»¶æ‰§è¡Œå®Œæ¯•åï¼Œä¼šé€šçŸ¥ä¸»çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹æ‰§è¡Œå›è°ƒï¼Œçº¿ç¨‹å½’è¿˜ç»™çº¿ç¨‹æ± ã€‚


# è¿è¡Œ npm run xxx çš„æ—¶å€™å‘ç”Ÿäº†ä»€ä¹ˆ ï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼š----------- https://zhuanlan.zhihu.com/p/487431985

npm run serveçš„æ—¶å€™ï¼Œå®é™…ä¸Šå°±æ˜¯æ‰§è¡Œäº†vue-cli-service serve
{
  "name": "h5",
    "scripts": {
    "serve": "vue-cli-service serve"
  },
}

å°±ä¼šåœ¨node_modules /.bin / ç›®å½•ä¸­åˆ›å»ºå¥½vue-cli-service ä¸ºåçš„å‡ ä¸ªå¯æ‰§è¡Œæ–‡ä»¶äº†ã€‚
å½“ä½¿ç”¨ npm run serve æ‰§è¡Œ vue - cli - service serve æ—¶ï¼Œ
è™½ç„¶æ²¡æœ‰å®‰è£… vue-cli-serviceçš„å…¨å±€å‘½ä»¤ä½†æ˜¯ 
npm ä¼šåˆ°./node_modules /.bin ä¸­æ‰¾åˆ°vue-cli-serviceæ–‡ä»¶ä½œä¸ºè„šæœ¬æ¥æ‰§è¡Œ
åˆ™ç›¸å½“äºæ‰§è¡Œäº†./node_modules/.bin/vue-cli-service serveï¼ˆæœ€åçš„ serve ä½œä¸ºå‚æ•°ä¼ å…¥ï¼‰ã€‚




# NODE  APIï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼š http://nodejs.cn/api/
1ï¼šassert æµ‹è¯•æ–­è¨€ã€‚
2ï¼šbuffer ç¼“å†²åŒº
JavaScript è¯­è¨€è‡ªèº«åªæœ‰å­—ç¬¦ä¸²æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰äºŒè¿›åˆ¶æ•°æ®ç±»å‹ã€‚ä½†åœ¨å¤„ç†åƒTCPæµæˆ–æ–‡ä»¶æµæ—¶,å¿…é¡»ä½¿ç”¨åˆ°äºŒè¿›åˆ¶æ•°æ®ã€‚å› æ­¤åœ¨ Node.jsä¸­,
å®šä¹‰äº†ä¸€ä¸ª Buffer ç±»ï¼Œè¯¥ç±»ç”¨æ¥åˆ›å»ºä¸€ä¸ªä¸“é—¨å­˜æ”¾äºŒè¿›åˆ¶æ•°æ®çš„ç¼“å­˜åŒºã€‚
const buf = Buffer.from('runoob', 'ascii');
// è¾“å‡º 72756e6f6f62
console.log(buf.toString('hex'));
// è¾“å‡º cnVub29i
console.log(buf.toString('base64'));

Node.js ç›®å‰æ”¯æŒçš„å­—ç¬¦ç¼–ç åŒ…æ‹¬ï¼šï¼šï¼š
ascii - ä»…æ”¯æŒ 7 ä½ ASCII æ•°æ®ã€‚å¦‚æœè®¾ç½®å»æ‰é«˜ä½çš„è¯ï¼Œè¿™ç§ç¼–ç æ˜¯éå¸¸å¿«çš„ã€‚
utf8 - å¤šå­—èŠ‚ç¼–ç çš„ Unicode å­—ç¬¦ã€‚è®¸å¤šç½‘é¡µå’Œå…¶ä»–æ–‡æ¡£æ ¼å¼éƒ½ä½¿ç”¨ UTF - 8 ã€‚
utf16le - 2 æˆ– 4 ä¸ªå­—èŠ‚ï¼Œå°å­—èŠ‚åºç¼–ç çš„ Unicode å­—ç¬¦ã€‚æ”¯æŒä»£ç†å¯¹ï¼ˆU + 10000 è‡³ U + 10FFFFï¼‰ã€‚
ucs2 - utf16le çš„åˆ«åã€‚
base64 - Base64 ç¼–ç ã€‚
latin1 - ä¸€ç§æŠŠ Buffer ç¼–ç æˆä¸€å­—èŠ‚ç¼–ç çš„å­—ç¬¦ä¸²çš„æ–¹å¼ã€‚
binary - latin1 çš„åˆ«åã€‚
hex - å°†æ¯ä¸ªå­—èŠ‚ç¼–ç ä¸ºä¸¤ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ã€‚

3ï¼šchild_process å­è¿›ç¨‹
åœ¨nodeä¸­æˆ‘ä»¬å¸¸å¸¸éœ€è¦åœ¨ä¸»è¿›ç¨‹ä¹‹å¤–æ–°å»ºä¸€ä¸ªå­è¿›ç¨‹æ¥æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨åˆ°nodeä¸­çš„child_processæ¨¡å—ã€‚child_process æ¨¡å—æä¾›äº†è¡ç”Ÿå­è¿›ç¨‹çš„åŠŸèƒ½ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹,
çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ä¹‹é—´ä¼šå»ºç«‹stdin, stdout, stderrä¸‰ä¸ªç®¡é“ï¼Œæ•°æ®èƒ½å¤Ÿä»¥éé˜»å¡çš„æ–¹å¼æµåŠ¨

4ï¼šé›†ç¾¤
Node.js çš„å•ä¸ªå®ä¾‹åœ¨å•ä¸ªçº¿ç¨‹ä¸­è¿è¡Œã€‚ ä¸ºäº†åˆ©ç”¨å¤šæ ¸ç³»ç»Ÿï¼Œç”¨æˆ·æœ‰æ—¶ä¼šæƒ³è¦å¯åŠ¨ Node.js è¿›ç¨‹çš„é›†ç¾¤æ¥å¤„ç†è´Ÿè½½

5ï¼šcrypto åŠ å¯†
const { createHmac } = await import('crypto');

6ï¼šåŸŸåæœåŠ¡å™¨


const secret = 'abcdefg';
const hash = createHmac('sha256', secret)
  .update('I love cupcakes')
  .digest('hex');
console.log(hash);


process.argv(commnder)
process.env(éœ€æ³¨æ„cross - env macå’Œwindowsä¸ä¸€æ ·)
process.cwd() å½“å‰å·¥ä½œç›®å½•
process.nextTick
process.platform

Buffer.isBuffer åˆ¤æ–­æ˜¯å¦æ˜¯Buffer
Buffer.slice
åˆ›å»ºbuffer å¹¶æŒ‡å®šå¤§å° Buffer.alloc(5)
å­—ç¬¦ä¸²è½¬buffer Buffer.from(str)
åˆ¤æ–­æ˜¯å¦æ˜¯buffer Buffer.isBuffer
Buffer.concat
Buffer.copy
Buffer.toString() buffer è½¬å­—ç¬¦ä¸²


processæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå¯é€šè¿‡process.argvè·å¾—å‘½ä»¤è¡Œå‚æ•°ã€‚ç”±äºargv[0]å›ºå®šç­‰äºNodeJSæ‰§è¡Œç¨‹åºçš„ç»å¯¹è·¯å¾„ï¼Œargv[1]å›ºå®šç­‰äºä¸»æ¨¡å—çš„ç»å¯¹è·¯å¾„ï¼Œå› æ­¤ç¬¬ä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°ä»argv[2]è¿™ä¸ªä½ç½®å¼€å§‹ã€‚


fs.unlink('/tmp/shiyanlou', function (err) {   //unlinkä¸ºåˆ é™¤æ–‡ä»¶æ–¹æ³•
  if (err) {
    throw err;
  }
  console.log('æˆåŠŸåˆ é™¤äº† /tmp/shiyanlou');
});

fs.readFile('./test.txt', function (err, data) {
  // è¯»å–æ–‡ä»¶å¤±è´¥/é”™è¯¯
  if (err) {
    throw err;
  }
  // è¯»å–æ–‡ä»¶æˆåŠŸ
  console.log(data);
});


var fs = require('fs'); // å¼•å…¥fsæ¨¡å—

// åˆ›å»º newdir ç›®å½•
fs.mkdir('./newdir', function (err) {
  if (err) {
    throw err;
  }
  console.log('make dir success.');
});


cooike::
var cookieParser = require('cookie-parser');

// custom log format
if (process.env.NODE_ENV !== 'test') app.use(logger(':method :url'))

// parses request cookies, populating
// req.cookies and req.signedCookies
// when the secret is passed, used
// for signing the cookies.
app.use(cookieParser('my secret here'));


var session = require('express-session');



expressAPIï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼š   https://www.expressjs.com.cn/4x/api.html
1ï¼šapp.use(express.json()); // è§£æè¯·æ±‚ä¸­çš„ json æ•°æ®
2ï¼šexpress.urlencoded å¤„ç†x - www - form - urlencodedå½¢å¼çš„è¯·æ±‚
3ï¼šapp.use(express.static("public")); // è®¾ç½®é™æ€èµ„æºç›®å½• ---------å½“æµè§ˆå™¨è®¿é—® /home.htmlæ—¶ï¼Œä¼šå»è‡ªåŠ¨åŒ¹é…public/home.htmlæ–‡ä»¶ï¼Œå¹¶å°†å®ƒè¿”å›ç»™å‰ç«¯ã€‚
4ï¼šè®¾ç½® æœ¬åœ°å˜é‡ app.locals.name = "å¼ ä¸‰";
console.log(app.locals.name);
/** ç­‰ä»·äº */
console.log(request.app.locals.name);
5ï¼šæœ¬åœ°å˜é‡ app.set("name", "zhangsan"); app.get("name");
6ï¼šç”¨äºå¤„ç†è·¯å¾„ä¸­çš„å‚æ•°  app.param
const app = express();
app.param("id", (req, res, next, id) => {
  console.log(id);
  next();
});
app.get("/user/:id", (req, res, next) => {
  res.send("1");
});

7ï¼šmysql è¯­å¥æ³¨æ„äº‹é¡¹ï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼šï¼š


#å‘é€é‚®ä»¶çš„nodeæ’ä»¶
const nodemailer = require('nodemailer'); 

# connect-history-api-fallback 


# node-sass 
npm rebuild node-sass


é—®é¢˜ï¼š
npm ERR! node-sass@4.13.0 postinstall: `node scripts/build.js`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the node-sass@4.13.0 postinstall script.

npm config set sass_binary_site=https://npm.taobao.org/mirrors/node-sass


# node-sass node ç‰ˆæœ¬å¯¹åº”å…³ç³»

Node 17 7.0+ 102
Node 16 6.0+ 93
Node 15 5.0+,<7.0  88
Node 14 4.14&4.14+  83
Node 13 4.13+,<5.0 79
Node 12 4.12+ 72
Node 11 4.10+,<5.0 67
Node 10 4.9+,<6.0 64
Node 8 4.5.3+,<5.0 57 
Node<8 <5.0  57ä»¥ä¸‹


# Sequelizeï¼šæ“ä½œæ•°æ®åº“çš„æ–¹å¼
Sequelize æ˜¯ä¸€ä¸ªåŸºäº promise çš„ Node.js ORM, 
ç›®å‰æ”¯æŒ Postgres, MySQL, MariaDB, SQLite ä»¥åŠ Microsoft SQL Server. å®ƒå…·æœ‰å¼ºå¤§çš„äº‹åŠ¡æ”¯æŒ, å…³è”å…³ç³», é¢„è¯»å’Œå»¶è¿ŸåŠ è½½,è¯»å–å¤åˆ¶ç­‰åŠŸèƒ½ã€‚



# REDISç¼“å­˜ï¼šhttps://www.jianshu.com/p/65e805c85500

# å®‰è£…æ•™ç¨‹ï¼šhttps://www.cnblogs.com/xuwenjin/p/14355901.html

é€Ÿåº¦å¿«
å•èŠ‚ç‚¹è¯»110000æ¬¡/sï¼Œå†™81000æ¬¡/s
åŸºäºå†…å­˜è¿è¡Œï¼Œæ€§èƒ½é«˜æ•ˆ
ç”¨ C è¯­è¨€å®ç°ï¼Œç¦»æ“ä½œç³»ç»Ÿæ›´è¿‘

æŒä¹…åŒ–
æ•°æ®çš„æ›´æ–°å°†å¼‚æ­¥åœ°ä¿å­˜åˆ°ç¡¬ç›˜ï¼ˆRDB å’Œ AOF

å¤šç§æ•°æ®ç»“æ„
ä¸ä»…ä»…æ”¯æŒç®€å•çš„ key-value ç±»å‹æ•°æ®
è¿˜æ”¯æŒï¼šå­—ç¬¦ä¸²ã€hashã€åˆ—è¡¨ã€é›†åˆã€æœ‰åºé›†åˆ


å®‰è£…
1ã€redisæ˜¯Cå¼€å‘çš„ï¼Œæ‰€ä»¥å®‰è£… redis éœ€è¦Cè¯­è¨€çš„ç¼–è¯‘ç¯å¢ƒï¼Œå³å®‰è£…gcc

yum install gcc
2ã€åˆ‡åˆ° /usr/local ç›®å½•ä¸‹ï¼Œä¸‹è½½ redis-5.0.7.tar.gz

wget http://download.redis.io/releases/redis-5.0.7.tar.gz
3ã€è§£å‹å¹¶ä¿®æ”¹æ–‡ä»¶å

tar xzf redis-5.0.7.tar.gz
mv redis-5.0.7 redis
4ã€è¿›å…¥redisç›®å½•ï¼Œç„¶åè¿›è¡Œç¼–è¯‘

make
5ã€å®‰è£…ï¼ˆè¿™ä¸ªPREFIXæ˜¯ç¼–è¯‘æ—¶ç”¨äºæŒ‡å®šç¨‹åºå­˜æ”¾çš„è·¯å¾„ï¼‰

make PREFIX=/usr/local/redis install
6ã€ä¿®æ”¹redis.confæ–‡ä»¶é‡Œçš„daemonizeä¸ºyesï¼Œè¡¨ç¤ºåå°å¯åŠ¨

vim redis.conf
7ã€åœ¨redis/ç›®å½•ä¸‹ï¼Œå¯åŠ¨å¹¶æŒ‡å®šé…ç½®æ–‡ä»¶

./src/redis-server redis.conf


8ã€è¿›å…¥rediså®¢æˆ·ç«¯ã€‚å‡ºç°å¦‚ä¸‹å‘½ä»¤è¡Œè¡¨ç¤ºå®‰è£…æˆåŠŸ

/usr/local/redis/bin/redis-cli

æŸ¥çœ‹ redis è¿›ç¨‹

ps -ef | grep redis

[root@ls ~]# ps -ef | grep redis
root     2307908       1  0  2022 ?        02:25:02 redis-server *:6379
root     2997163 2996919  0 14:48 pts/0    00:00:00 grep --color=auto redis


å…³é—­ redis æœåŠ¡(æ€æ‰è¿›ç¨‹)

kill -9 pid


 redis-server /usr/local/etc/redis.conf




å¯è§†åŒ–å·¥å…·ï¼šhttps://juejin.cn/post/7072537112834211847

RedisInsight

ç”¨æ³•ï¼š
const redis = require("redis");
// è¿æ¥ Redis
const client = redis.createClient({ host: "127.0.0.1", port: 6379 });

// ä½¿ç”¨äº‹ä»¶å‘å°„å™¨ï¼Œæ£€æµ‹é”™è¯¯
client.on("error", function (error) {
    console.error(error);
});

// console æ¥éªŒè¯ Redis çš„ API æ˜¯å¼‚æ­¥
console.log("ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ¦‹");
// å­˜å‚¨ä¸€ä¸ª key value
client.set("name", "Condor Hero", redis.print);
console.log("ğŸ¥ğŸ¥ğŸ¥ğŸ¥");
// è¯»å– name è¿™ä¸ª key çš„å€¼
client.get("name", redis.print); 
console.log("ğŸğŸğŸğŸ");
// é€€å‡º Redis
client.quit();
console.log("ğŸ¦„ğŸ¦„ğŸ¦„ğŸ¦„");
ç»“æœï¼š
Reply: OK
Reply: Condor Hero

const { redis } = require("./db");
const chalk = require("chalk");

const { redis } = require("./db");
const chalk = require("chalk");

redis.set("name", "Condor Hero").then(res => {
    redis.get("name").then(val => {
        console.log(chalk.green(val));
        process.exit(1);
    });
});


æ¶ˆæ¯é˜Ÿåˆ—ï¼š

å›æµ(äº‹åŠ¡)ï¼š
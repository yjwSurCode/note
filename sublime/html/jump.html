<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>正在跳转2.......</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!-- <meta http-equiv="refresh" content="0; url=http://cms-yx.beta1.fn/act/htm/fresh-cms-v2/card-game-youxian.html?storeCode=1001&activityId=714" /> -->
    <!-- <meta http-equiv="refresh" content="0; url=http://10.211.242.183:3000/?ROUTE_ENTRY=card-game&ROUTE_PATHNAME=youxian&activityId=719&storeCode=1001" /> -->
    <!-- <meta http-equiv="refresh" content="0; url=http://10.211.242.183:3000/?ROUTE_ENTRY=annual&ROUTE_PATHNAME=youxian&activityId=719&storeCode=1002" /> -->
    <!-- <meta http-equiv="refresh" content="0; url=http://10.211.242.183:3000/?ROUTE_ENTRY=yun-pos&ROUTE_PATHNAME=activity" /> -->
    <!-- <meta http-equiv="refresh" content="0; url=http://cms-yx.beta1.fn/act/htm/fresh-cms-v2/annual-2021.html" /> -->

    <!-- 143 门店拉新排行-->
    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3000/nstore-report.html?routePath=nstore-recruit-rank"
    /> -->

    <!-- <meta
      http-equiv="refresh"			
      content="0; url=http://10.211.242.183:3001/b2c-report.html?routePath=b2c-dynamic-ranking"
    /> -->

    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3002/nb2b-report.html?routePath=nb2b-elf-bh-realtime-sales"
    /> -->

    <!-- 143 -->
    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3000/store-report.html?routePath=store-recruit-analysis"
    /> -->

	<!-- 推广成效分析 -->
    <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3000/b2c-report.html?routePath=b2c-order-analysis"
    />

    <!-- 推广成效分析 -->
    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3001/youxian-report.html?routePath=youxian-spread-analysis"
    /> -->

    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://cms-yx.beta1.fn/act/htm/fresh-cms-v2/yun-pos-app-game.html?storeCode=1001"
    /> -->

    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3000/elm-report.html?routePath=elm-order-analysis"
    /> -->

    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3000/aging?dateType=YESTERDAY&entry=home"
    /> -->

    <!-- 店总140 -->
    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3003/pickup?dateType=YESTERDAY&entry=home"
     /> -->

    <!-- 140 b2c入口 -->
    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3000/pickup_unusual_store?dateType=YESTERDAY&dataType=0&rangType=1&entry=home"
    /> -->

    <!-- 店总141 排行效率 分析 -->
    <!-- &entry=home&dateType=OTHER&customDefine=2022-11-15&routeQuery={ pageState: 111 }			 -->

    <!-- 店总141 排行效率排行 -->
    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3000/b2c-report.html?routePath=b2c-efficiency-rank"
    /> -->

    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3001/b2c-report.html?routePath=b2c-efficiency-analysis&entry=home"
    /> -->

    <!-- &routeQuery={%22pageState%22:{%22typeList%22:[1,2]}%20} -->

    <!-- 一小时排行榜 全店大盘分析 -->

    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3000/b2c-report.html?routePath=b2c-achievement-ranking"
    />	 -->

    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3000/b2c-report.html?routePath=b2c-sales-ranking"
    />	 -->

    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3001/nstore-report.html?routePath=nstore-order-analysis"
    /> -->

    <!-- 一小时部门销售 -->

    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3000/b2c-report.html?routePath=b2c-subject-analysis"
    /> -->

    <!-- 中台券 -->
    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3000/nstore-report.html?routePath=nstore-coupon-ranking"
    /> -->

    <!-- 141 三个页面  深/半改门店  渠道店统计  店仓门店 -->
    <!-- <meta 
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3000/store-report.html?routePath=store-hang-summary"
    />	 -->

    <!-- <meta 
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3001/nstore-report.html?routePath=nstore-channels-statistics"
    />	 -->

    <!-- <meta 
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3000/nstore-report.html?routePath=nstore-store-warehouse"
    />	 -->

    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://dzcm.beta1.fn/report/page/store-warehouse.shtml"
    /> -->

    <!--之前图表 bug -->
    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3000/nyouxian-report.html"
    />	 -->

    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3001/nyouxian-report.html?routePath=nyouxian-spread-analysis"
    />	 -->

    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3001/youxian-report.html?routePath=youxian-spread-analysis&entry=home&dateType=OTHER&customDefine=2022-11-15&routeQuery={ pageState: 111 }"
    />	 -->
    <!-- 
    <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3000/b2c-report.html?routePath=b2c-achievement-ranking"
    />	 -->

    <!-- 毛利课bug -->

    <!-- <meta
      http-equiv="refresh"
      content="0; url=http://10.211.242.183:3000/nstore-report.html?routePath=nstore-purchase-department"
    />	 -->

    <style>
      .parant1 {
        display: flex;
        line-height: 200px;
      }

      .parant2 {
        display: inline;
        line-height: 200px;
      }

      .child1 {
        width: 200px;
        height: 200px;
        background-color: RED;
      }

      .child2 {
        width: 50px;
        height: 50px;
        background-color: rgb(102, 18, 238);
        vertical-align: middle;
        display: inline;
      }

      .child3 {
        width: 200px;
        height: 200px;
        background-color: RED;
      }

      .child4 {
        width: 50px;
        height: 50px;
        background-color: rgb(102, 18, 238);
        vertical-align: middle;
        display: inline;
      }

      .box {
        background: black;
        color: white;
        padding-left: 20px;
        height: 200px;
        line-height: 200px;
        display: inline-block;
      }
      .dot {
        display: inline-block;
        width: 4px;
        height: 4px;
        background: rgb(255, 8, 8);
        vertical-align: middle;
      }
      /* 33333333333333 */
      #testBox {
        background: green;
        width: 600px;
        margin-left: 310px;
        line-height: 200px;
      }
      #testImage {
        vertical-align: middle;
        display: inline-block;
      }
      .line_box {
        background: black;
        color: white;
        padding-left: 20px;
        font-size: 14px;
      }
      .test_dot {
        display: inline-block;
        width: 4px;
        height: 4px;
        overflow: hidden;
        background: red;
        vertical-align: middle;
      }
    </style>
  </head>
  <body>
    <div class="parant1">
      <div class="child1"></div>
      <div class="child2"></div>
    </div>
    11111111111111111111
    <div class="parant2">
      <span class="child3"></span>
      <span class="child4"></span>
    </div>
    2222222222222222222222222222
    <span class="box">
      <span class="dot"></span> <span> 我是一段卡哇伊的文字。</span>
    </span>

    <!-- <span class="box">
      <div class="dot"></div>
      <span> 我是一段卡哇伊的文字。</span>
    </span> -->

    <div id="testBox" class="test_box">
      <!-- <span id="lineBox" class="line_box"> -->
      <img
        id="testImage"
        class="img"
        src="data:image/jpeg;base64,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"
      />
      <span id="testDot" class="test_dot"></span>
      <span id="testWord" style="font-size: 20px">我是卡哇伊文字！</span>
      <!-- </span> -->
    </div>
  </body>
</html>

<!-- 

{/* {item.prizeType === 3 ? (
																		<span
																			onClick={() =>
																				handleViewCode({
																					name: item.consigneeName,
																					phone: item.consigneeTelephone,
																					address: item.consigneeAddress,
																					prizeRecordId: item.prizeRecordId,
																				})
																			}
																		>
																			修改地址
																		</span>
																	) : item.nrCode ? (
																		<span
																			onClick={() =>
																				handleViewCode({
																					nrCode: item.nrCode,
																				})
																			}
																		>
																			查看券码
																		</span>
																	) : (
																		<span>确认</span>
																	)} */} -->

<!-- 

import React, { useEffect, useState, useRef, useMemo } from 'react';
import { createBEM } from '../../utils/class-utils';
import logUtils from '../../utils/log-utils';
import { PLATFORM_BRIDGE } from '../../utils/platform-utils';
import { RunningEnv, FreshChannel } from '../../core/constants';
import { NATIVE_BRIDGE } from '../../utils/native-utils';
import { createFC } from '../../utils/react-utils';
import { AppLocation } from '../../utils/route-utils';
import { useAsyncFn } from '../../hooks/use-advanced';
import { YunPosGameSvc } from './supports/service';
import { YunPosRaffle } from './supports/interface';
import { Loading, Toast, Popup, Icon, Button, Cascader } from 'fnx-ui';
import { TreeQuery } from '../../utils/tree-utils';
import { loadImage } from '../../utils/script-utils';
import WheelGamePage from './components/WheelGame/index';
import { classnames } from './../../utils/class-utils';
import Empty from './../../components/Empty/index';
import closeImg from './assets/images/close.png';
import patronizeImg from './assets/images/pup_elephant.png';
import { Res, okRes, errRes } from '@artisan-framework/core';
import Barcode from './components/BarCode';
import './YunPosGamePage.less';

const bem = createBEM('yun-pos-game-page');

type StatusType = 'login' | 'game' | 'address';

interface PageState {
	// /*地区*/
	areaTree?: YunPosRaffle.AreaTreeNode[];
	/*GUID*/
	guid: string;
	/*门店号*/
	storeCode: string;
	/*卷活动id*/
	activityId?: string;
	/*会员卡号*/
	cardId?: string;
	/*抽奖活动信息数据*/
	activityData: YunPosRaffle.QueryActInfoData;
	/*活动唯一id*/
	actId: string;
}

/*抽奖活动信息数据*/
// activityData: YunPosRaffle.QueryActInfoData;
/*活动唯一id*/
// actId: string;

interface FormDataState {
	prizeRecordId?: number;
	name: string;
	phone: string;
	address: string;
}

const YunPosGamePage = createFC<{ location: AppLocation }>('YunPosGamePage', (props) => {
	const [pageStatus, setPageStatus] = useState<StatusType>('game');
	const [loginData, setLoginData] = useState<YunPosRaffle.LoginInfoData>();
	const [pageData, setPageData] = useState<PageState>();
	const [activityData, setActivityData] = useState<PageState>();
	const [drawTimes, setTimes] = useState<number>(0);
	const [nrCodeData, setNrCodeData] = useState<YunPosRaffle.QueryNrCodeData>();
	const [volumeCodeData, setVolumeCodeData] = useState<YunPosRaffle.ViewCodeInfoData>();
	const [selectKey, setSelectKey] = useState<number | null>(null);
	const [captchaCountDown, setCaptchaCountDown] = useState<number>();
	const selectPrizes = useRef<YunPosRaffle.WinningTripleData | null>();
	const selectCode = useRef<string | undefined>();
	const [currentStore, setCurrentStore] = useState<YunPosRaffle.Area>();
	const [storeCascader, setStoreCascader] = useState<boolean>(false);
	const [formData, setFormData] = useState<FormDataState>(() => ({
		name: '',
		phone: '',
		address: '',
	}));
	const [thanksPopupData, setThanksPopupData] = useState<boolean>();
	const [rulePopupData, setRulePopupData] = useState<{
		visible?: boolean;
		title?: string;
	}>();
	const [prizePopupData, setPrizePopupData] = useState<{
		title?: string;
		content?: YunPosRaffle.CheckPrizeInfoData[];
		visible?: boolean;
	}>();
	const [awardPopupData, setAwardPopupData] = useState<{
		title?: string;
		visible?: boolean;
	}>();
	const [codePopupData, setCodePopupData] = useState<{
		title?: string;
		visible?: boolean;
	}>();

	const [{ loading: pageLoading, error: pageDataError }, { run: loadPageData }] = useAsyncFn(
		async (loc: AppLocation): Promise<Res<PageState, 'no-login'>> => {
			const { storeCode: queryStoreCode, owx: owx } = loc.params;
			const { area_code } = JSON.parse(decodeURIComponent(owx || '{}'));
			const env = await PLATFORM_BRIDGE.getRunningEnv();
			let storeCode: string = queryStoreCode || area_code || undefined;
			let guid: string | undefined;

			guid = loc.params.guid;

			if (env === RunningEnv.Android || env === RunningEnv.Ios) {
				const cookies = await NATIVE_BRIDGE.getNativeCookies();
				guid = cookies.yx_guid;
			}

			if (!guid) {
				return errRes('no-login');
			}

			if (currentStore?.no) {
				storeCode = currentStore?.no;
			}

			// /*活动信息接口数据*/
			const activityData = await YunPosGameSvc.queryActInfo({ storeCode: currentStore?.no }); // quant.actId;

			if (!activityData) {
				throw new Error('后台接口返回错误');
			}

			return okRes({
				guid,
				storeCode,
				activityData,
				actId: activityData.actId,
			});
		},
		{
			onSuccess: async (res) => {
				if (res.isError) {
					if (res.error === 'no-login') {
						setPageStatus('login');
						PLATFORM_BRIDGE.jumpLogin({ url: window.location.href });
					}

					return;
				}

				console.log('b-111111111111', res.value);

				setPageData(res.value);

				if (res.value.storeCode) {
					handleGetTimes(res.value.storeCode, res.value.guid, res.value.actId);
				}
			},
			onError: (err) => {
				if ('Failed to fetch' === err.message) {
					Toast.fail(`网络开小差拉，可以刷新一下，重新进入哦～～`);
					return;
				}
				alert(err.message);
			},
		},
	);

	console.log('a-pageData-------', pageData);

	const [{ data: activity, loading: progressLoading }, { run: loadActivityData }] = useAsyncFn(
		async (loc: AppLocation): Promise<Res<{ areaTree: YunPosRaffle.AreaTreeNode[] }, 'no-login'>> => {
			const { storeCode: queryStoreCode, owx: owx } = loc.params;
			const { area_code } = JSON.parse(decodeURIComponent(owx || '{}'));
			const env = await PLATFORM_BRIDGE.getRunningEnv();
			let storeCode: string = queryStoreCode || area_code || undefined;
			let guid: string | undefined;

			// if (![RunningEnv.Android, RunningEnv.Ios, RunningEnv.AliApp, RunningEnv.WeApp].includes(env)) {
			// 	throw new Error('该活动仅支持在大润发优鲜app及大润发优鲜小程序参与哦~');
			// }

			guid = loc.params.guid;

			if (env === RunningEnv.Android || env === RunningEnv.Ios) {
				const cookies = await NATIVE_BRIDGE.getNativeCookies();
				guid = cookies.yx_guid;
				if (cookies.yx_storecode && !storeCode) {
					storeCode = cookies.yx_storecode;
				}
			}

			if (!guid) {
				return errRes('no-login');
			}

			const areaTree = await YunPosGameSvc.getAreaTree();

			if (!storeCode) {
				setStoreCascader(true);
			} else {
				const node = new TreeQuery(areaTree).findNodeByDepth(({ attrs }) => attrs.no === storeCode);
				setCurrentStore(node?.attrs);
			}

			return okRes({ areaTree });
		},
		{
			onSuccess: async (res) => {
				console.log(res, 'b-22222222222222');

				if (res.isError) {
					if (res.error === 'no-login') {
						setPageStatus('login');
						PLATFORM_BRIDGE.jumpLogin({ url: window.location.href });
					}

					return;
				}

				setPageData({ ...pageData, ...res.value.areaTree });
			},
			onError: (err) => {
				console.log(err, 'b-444444444444');
			},
		},
	);

	console.log('a-activity-------', activity);

	const [{ loading: captchaLoading }, { run: _handleCaptcha }] = useAsyncFn(
		async (): Promise<Res<string, [number, string]>> => {
			return await YunPosGameSvc.sendLoginCaptcha({
				phone: formData.phone,
			});
		},
		{
			onSuccess: (res) => {
				if (res.isError) {
					const [, msg] = res.error;
					Toast.fail({ message: msg });
					return;
				}

				setCaptchaCountDown(60);
				Toast.show({ message: '验证码已通过短信发送至您的手机，请注意查收' });
			},
			onError: (err) => {
				Toast.fail(`无法连接到服务器:${(err && err.message) || err}`);
			},
		},
	);

	const [, { run: _handleSubmit }] = useAsyncFn(
		async (params: {
			storeCode: string;
			phone: string;
			validCode: string;
			nrCode: string;
		}): Promise<Res<YunPosRaffle.LoginInfoData, [number, string]>> => {
			const toast = Toast.loading({ duration: 0 });

			try {
				return await YunPosGameSvc.login(params);
			} finally {
				toast.clear();
			}
		},
		{
			onSuccess: (res) => {
				if (res.isError) {
					const [, msg] = res.error;
					Toast.fail({ message: msg });
					return;
				}

				/*保存登录返回信息*/
				setLoginData(res.value);
				setPageStatus('game');

				if (pageData?.cardId != '-1') {
					handleNrCode();
				} else {
					// setNrCodeData({ nrCode: [{ couponNumber: formData.nrCode, orderCode: '' }], drawTimes: 1 });
				}
			},
			onError: (err) => {
				Toast.fail(`无法连接到服务器:${(err && err.message) || err}`);
			},
		},
	);

	const [, { run: handleNrCode }] = useAsyncFn(
		async (): Promise<Res<{ nrCodeData: YunPosRaffle.QueryNrCodeData }, 'need-nrCode'>> => {
			if (!pageData?.activityId || !pageData?.cardId) {
				throw new Error('URL parse failed');
			}

			/*获取nRCode接口数据*/
			const nrCodeData = await YunPosGameSvc.queryNrCode({
				couponId: pageData?.activityId,
				cardId: pageData?.cardId,
			});

			if (!nrCodeData.nrCode) {
				return errRes('need-nrCode');
			}

			return okRes({ nrCodeData });
		},
		{
			onSuccess: (res) => {
				if (res.isError) {
					Toast.fail({ message: '后台接口返回错误2' });
					return;
				}

				// setNrCodeData(res.value.nrCodeData);
			},
			onError: (err) => {
				Toast.fail(`无法连接到服务器:${(err && err.message) || err}`);
			},
			cacheData: true,
		},
	);

	const [, { run: _handleLuckDraw }] = useAsyncFn(
		async (): Promise<Res<YunPosRaffle.WinningTripleData, [number, string]>> => {
			const toast = Toast.loading({ duration: 0 });

			if (!pageData?.activityData.actId || currentStore == undefined) {
				throw new Error('后台接口返回错误');
			}

			try {
				/*调用抽奖接口*/
				return await YunPosGameSvc.winningTriple({
					actId: pageData?.activityData.actId, //pageData?.actId,
					storeCode: currentStore.no, // nrCodeData.nrCode[0].couponNumber,
					guid: pageData.guid, //loginData?.guid,
				});
			} finally {
				toast.clear();
			}
		},
		{
			onSuccess: (res) => {
				if (res.isError) {
					const [code, msg] = res.error;
					Toast.fail({ message: msg });
					console.log(res, 'a-666666666666666666666');
					// if (Number(code) === 1005) {
					// 	Toast.fail({ message: '该二维码已使用，暂无抽奖资格' });
					// 	if (pageData?.cardId != '-1') {
					// 		handleNrCode();
					// 	} else {
					// 		setNrCodeData({ nrCode: [], drawTimes: 0 });
					// 	}
					// 	return;
					// }
					// Toast.fail({ message: msg });
					// if (pageData?.cardId != '-1') {
					// 	handleNrCode();
					// } else {
					// 	setNrCodeData({ nrCode: [], drawTimes: 0 });
					// }

					return;
				}

				const _index = pageData?.activityData.prizeVoList.findIndex((item: YunPosRaffle.PrizeVoListData) => {
					return item.id === res.value.prizeId;
				});

				if (
					_index == null ||
					(_index < 0 && res.value.prizeType !== 1) ||
					(_index > 0 && res.value.prizeType === 1)
				) {
					Toast.fail({ message: '后台接口返回错误3' });
					return;
				}

				setSelectKey(_index + 1);
				selectPrizes.current = res.value;

				res.value;

				if (!pageData || selectCode.current) return;
				handleGetTimes(pageData.storeCode, pageData.guid, pageData.actId);
				//存卷码
				selectCode.current = res.value.nrCode;

				// if (pageData?.cardId != '-1') {
				// 	handleNrCode();
				// } else {
				// 	setNrCodeData({ nrCode: [], drawTimes: 0 });
				// }
			},
			onError: (err) => {
				Toast.fail(`无法连接到服务器:${(err && err.message) || err}`);
			},
		},
	);

	const [, { run: handleCheckPrize }] = useAsyncFn(
		async (): Promise<Res<Array<YunPosRaffle.CheckPrizeInfoData>, [number, string]>> => {
			const toast = Toast.loading({ duration: 0 });

			if (!pageData?.actId || !pageData?.guid) {
				throw new Error('后台接口返回错误');
			}

			try {
				/*调用奖品信息查询接口(查看我的奖品)*/
				return await YunPosGameSvc.checkPrizeInfo({
					actId: pageData.actId,
					storeCode: currentStore?.no,
					guid: pageData.guid,
				});
			} finally {
				toast.clear();
			}
		},
		{
			onSuccess: (res) => {
				if (res.isError) {
					const [, msg] = res.error;
					Toast.fail({ message: msg });
					return;
				}

				console.log('我的奖品我的奖品我的奖品我的奖品', res.value);

				setPrizePopupData({ visible: true, title: '我的奖品', content: res.value });
			},
			onError: (err) => {
				Toast.fail(`无法连接到服务器:${(err && err.message) || err}`);
			},
		},
	);

	const [, { run: handleViewCode }] = useAsyncFn(
		async (params: {
			nrCode?: string;
			name?: string;
			phone?: string;
			address?: string;
			prizeRecordId?: string;
		}): Promise<Res<YunPosRaffle.ViewCodeInfoData | { type: 'material' }, [number, string]>> => {
			console.log('a-444444444444444444', params, !params.nrCode, selectPrizes.current?.prizeType);
			/*跳转地址填写页面 */
			// if (params.type === 1 || selectPrizes.current?.prizeType === 3) {
			// 	return okRes({ type: 'material', result: params });
			// }

			if (params.prizeRecordId) {
				return okRes({ type: 'material', result: params });
			}

			if (selectPrizes.current?.prizeType == 3) {
				return okRes({ type: 'material', result: params });
			}

			const toast = Toast.loading({ duration: 0 });

			try {
				/*查看一维码*/
				return await YunPosGameSvc.viewCodeInfo({
					nrCode: params.nrCode,
				});
			} finally {
				toast.clear();
			}
		},
		{
			onSuccess: (res) => {
				if (res.isError) {
					const [, msg] = res.error;
					Toast.fail({ message: msg });
					return;
				}
				console.log('a-5555555555555555555555555', res.value);

				/*填写地址*/
				if ((res.value as any).type == 'material') {
					setFormData({ ...formData, ...(res.value as any).result });
					setPrizePopupData({ ...prizePopupData, visible: false });
					setAwardPopupData({ ...awardPopupData, visible: false });
					setPageStatus('address');
					return;
				}

				//TODO 类型做兼容
				setVolumeCodeData(res.value as YunPosRaffle.ViewCodeInfoData);
				setCodePopupData({ ...codePopupData, visible: true });
				setAwardPopupData({ ...awardPopupData, visible: false });
			},
			onError: (err) => {
				Toast.fail(`无法连接到服务器:${(err && err.message) || err}`);
			},
		},
	);

	const [, { run: handleSaveInfo }] = useAsyncFn(
		async (params: {
			prizeRecordId: number;
			name: string;
			phone: string;
			address: string;
		}): Promise<Res<string, [number, string]>> => {
			const toast = Toast.loading({ duration: 0 });

			try {
				/*中奖信息人保存接口+核销接口*/
				return await YunPosGameSvc.saveInformation({
					prizeRecordId: params.prizeRecordId,
					name: params.name,
					phone: params.phone,
					address: params.address,
				});
			} finally {
				toast.clear();
			}
		},
		{
			onSuccess: (res) => {
				if (res.isError) {
					const [, msg] = res.error;
					Toast.fail({ message: msg });
					return;
				}

				// setClickable(false);
				Toast.success({ message: res.value });
				setTimeout(() => {
					selectPrizes.current = null;
					setPageStatus('game');
				}, 500);
			},
			onError: (err) => {
				Toast.fail(`无法连接到服务器:${(err && err.message) || err}`);
			},
		},
	);

	const handleLuckDraw = () => {
		if (drawTimes < 1) {
			Toast.fail({ message: '很抱歉，您的抽奖次数已用光' });
			return;
		}

		if (selectKey != null) return;

		_handleLuckDraw();
	};

	const handleViewPrize = () => {
		setSelectKey(null);

		if (selectPrizes.current?.prizeType === 1) {
			setThanksPopupData(true);
		} else {
			setAwardPopupData({ visible: true, title: '恭喜您' });
		}
	};

	const handleSubmit = () => {
		if (!formData.name || !formData.phone || !formData.address) {
			Toast.fail('请填写完整');
			return;
		}
		console.log(formData, '55555555fformData');

		if (formData.prizeRecordId) {
			handleSaveInfo({ prizeRecordId: formData.prizeRecordId, ...formData });
		} else if (selectPrizes.current?.prizeRecordId) {
			handleSaveInfo({ prizeRecordId: selectPrizes.current?.prizeRecordId, ...formData });
		}
	};

	const handleCaptcha = () => {
		if (captchaLoading || captchaCountDown != null) {
			return;
		}

		_handleCaptcha();
	};

	const handleGetTimes = async (storeCode: string, guid: string, actId?: string) => {
		if (guid && storeCode) {
			/*抽奖次数*/
			const timeData = await YunPosGameSvc.queryTimes({
				storeCode: storeCode,
				actId: actId,
				guid: guid,
			});

			console.log(timeData.drawTimes, '666666666666timeData');
			if (typeof timeData.drawTimes === 'number') {
				setTimes(timeData.drawTimes);
				return;
			}
			Toast.fail(`获取抽奖次数失败~`);
		} else {
			// Toast.fail(`获取抽奖次数失败~`);
		}
	};

	const ruleContent = useMemo<string[]>(() => {
		return pageData?.activityData.ruleContent ? pageData?.activityData.ruleContent.split('\n') : [];
	}, [pageData?.activityData]);

	const couponsRuleContent = useMemo<string[]>(() => {
		return volumeCodeData?.rtExchangeRules ? volumeCodeData.rtExchangeRules.split('\n') : [];
	}, [volumeCodeData?.rtExchangeRules]);

	useEffect(() => {
		if (captchaCountDown == null) {
			return;
		}

		const tid = setTimeout(() => {
			setCaptchaCountDown(captchaCountDown > 1 ? captchaCountDown - 1 : undefined);
		}, 1000);

		return () => {
			clearTimeout(tid);
		};
	}, [captchaCountDown]);

	useEffect(() => {
		console.log('a-111111111111111', currentStore);
		if (currentStore) {
			loadPageData(props.location);
		}
	}, [currentStore, loadPageData, props.location]);

	useEffect(() => {
		loadActivityData(props.location);
	}, [loadActivityData, props.location]);

	useEffect(() => {
		PLATFORM_BRIDGE.setPageTitle('转盘抽奖');
	}, []);

	if (pageDataError) {
		return <Empty description={`${pageDataError.message || pageDataError}`} />;
	}

	if (pageLoading) {
		return (
			<div className={bem('center')}>
				<Loading className={bem('loading')} size={50} />
			</div>
		);
	}

	const renderLoginView = () => {
		return (
			<>
				<Empty description={'很抱歉，您当前暂未登陆APP/小程序\n请登陆后再来参加活动吧~~'} />
				<Button
					block
					className={bem('login-btn')}
					onClick={() => PLATFORM_BRIDGE.jumpLogin({ url: window.location.href })}
				>
					去登陆
				</Button>
			</>
		);
	};

	const renderInfo = () => {
		return (
			<>
				<div className={classnames(bem('module'), bem('verify'))}>
					<div className={bem('field')}>
						<label className={bem('field-label')}>门店</label>
						<div className={classnames(bem('field-input'), bem('field-input-store'))}>
							<input readOnly value={currentStore?.label} />
						</div>
					</div>

					<div className={bem('field')}>
						<label className={bem('field-label')}>姓名</label>
						<div className={bem('field-input')}>
							<input
								maxLength={100}
								placeholder="请输入您的姓名"
								defaultValue={formData.name}
								onChange={(e) => setFormData((prev) => ({ ...prev, name: e.target.value }))}
							/>
						</div>
					</div>

					<div className={bem('field')}>
						<label className={bem('field-label')}>电话</label>
						<div className={bem('field-input')}>
							<input
								maxLength={11}
								placeholder="请输入您的电话号码"
								defaultValue={formData.phone}
								onChange={(e) => setFormData((prev) => ({ ...prev, phone: e.target.value }))}
							/>
						</div>
					</div>

					<div className={bem('field')}>
						<label className={bem('field-label')}>地址</label>
						<div className={bem('field-input')}>
							<input
								maxLength={256}
								placeholder="请输入您的家庭住址"
								defaultValue={formData.address}
								onChange={(e) => setFormData((prev) => ({ ...prev, address: e.target.value }))}
							/>
						</div>
					</div>

					{/* <div
						className={classnames(bem('submit-btn'), clickable ? null : bem('submit-btn--disabled'))}
						onClick={handleSubmit}
						style={{ backgroundColor: pageData?.publicData.btnColor }}
					>
						确认提交
					</div> */}
					<div className={classnames(bem('submit-btn'))} onClick={handleSubmit}>
						确认提交
					</div>
				</div>
				{/* <div className={classnames(bem('module'), bem('rule'))}>
					<div className={bem('rule-title')}>活动规则</div>
					{pageData?.publicData.ruleType === 1 ? (
						<div className={bem('rule-content')}>
							{ruleContent.map((line, idx) => (
								<p key={idx}>{line}</p>
							))}
						</div>
					) : (
						<img className={bem('rule-img')} src={pageData?.publicData.ruleImg} alt="" />
					)}
				</div> */}
				<div className={bem('footer')}></div>
			</>
		);
	};

	const renderAwardPopup = () => {
		return (
			<Popup visible={awardPopupData && awardPopupData.visible} className={bem('tip-container')}>
				<div className={bem('award')}>
					<div className={bem('subtitle')}>{awardPopupData?.title}</div>
					<div className={bem('main-content')}>
						{selectPrizes.current?.prizeType === 2 ? (
							selectPrizes.current?.couponName
						) : (
							<>
								<div className={bem('main-content-title')}>{selectPrizes.current?.prizeName}</div>
								<img className={bem('main-content-img')} src={selectPrizes.current?.prizeImg} alt="" />
							</>
						)}
					</div>
					<div className={bem('check-btn')} onClick={() => handleViewCode({})}>
						查看奖品
					</div>
				</div>
				<div className={bem('close-img')}>
					<img
						src={closeImg}
						onClick={() => {
							setAwardPopupData({
								...awardPopupData,
								visible: false,
							});
						}}
					/>
				</div>
			</Popup>
		);
	};

	const renderPrizePopup = () => {
		return (
			<Popup visible={prizePopupData && prizePopupData.visible} className={bem('tip-container')}>
				<div className={bem('prize')}>
					<div className={bem('prize-title')}>{prizePopupData?.title}</div>
					{prizePopupData && prizePopupData.content?.length === 0 ? (
						<div className={bem('prize-regret')}>很遗憾，您当前暂无中奖记录，再接再厉哦~</div>
					) : (
						<>
							<div className={bem('prize-content')}>
								<table className={bem('table')}>
									<tbody>
										<tr>
											<th>奖品名称</th>
											<th>奖品类型</th>
											<th>领取手机号</th>
											<th>领取时间</th>
										</tr>
										{prizePopupData?.content?.map(
											(item: YunPosRaffle.CheckPrizeInfoData, index: number) => {
												return (
													<tr key={index}>
														<td>{item.prizeName}</td>
														<td>
															<div>{item.prizeType === 3 ? '第三方实物' : '优惠券'}</div>
															<div className={bem('code-btn')}>
																{item.prizeType === 3 ? (
																	<span
																		onClick={() =>
																			handleViewCode({
																				name: item.consigneeName,
																				phone: item.consigneeTelephone,
																				address: item.consigneeAddress,
																				prizeRecordId: item.prizeRecordId,
																			})
																		}
																	>
																		修改地址
																	</span>
																) : item.nrCode ? (
																	<span
																		onClick={() =>
																			handleViewCode({ nrCode: item.nrCode })
																		}
																	>
																		查看券码
																	</span>
																) : (
																	<span onClick={() => Toast.fail('后台返回错误')}>
																		undefined
																	</span>
																)}
															</div>
														</td>
														<td>{item.telephoneNumber}</td>
														<td>{item.createTime}</td>
													</tr>
												);
											},
										)}
									</tbody>
								</table>
							</div>
							<div className={bem('prize-remark')}>
								注：可以通过“优鲜小程序/APP-我的/优惠券卡包”查看已领取优惠券。
							</div>
						</>
					)}
				</div>
				<div className={bem('close-img')}>
					<img
						src={closeImg}
						onClick={() => {
							setPrizePopupData({
								...prizePopupData,
								visible: false,
							});
						}}
					/>
				</div>
			</Popup>
		);
	};

	const renderThanksPopup = () => {
		return (
			<Popup visible={thanksPopupData} className={bem('tip-container')}>
				<div className={bem('patronize')}>
					<img className={bem('patronize-img')} src={patronizeImg} alt="" />
					<div className={bem('patronize-msg')}>
						这次活动太过火爆啦！我们准备的奖品已经发放完毕了，但是我们为您准备了精美礼品，请您前往服务台兑换哦~
					</div>
				</div>
				<div className={bem('close-img')}>
					<img src={closeImg} onClick={() => setThanksPopupData(false)} />
				</div>
			</Popup>
		);
	};

	const renderRulePopup = () => {
		return (
			<Popup visible={rulePopupData && rulePopupData.visible} className={bem('tip-container')}>
				{pageData && pageData.activityData.ruleType === 1 ? (
					<div className={bem('rule')}>
						<div className={bem('rule-title')}>{rulePopupData && rulePopupData.title}</div>
						<div className={bem('rule-content')}>
							<div className={bem('rule-content-text')}>
								{ruleContent.map((line, idx) => (
									<p key={idx}>{line}</p>
								))}
							</div>
						</div>
					</div>
				) : (
					<img
						className={bem('rule-content-img')}
						src={pageData?.activityData && pageData?.activityData.ruleImg}
					/>
				)}
				<div className={bem('close-img')}>
					<img
						src={closeImg}
						onClick={() =>
							setRulePopupData({
								...rulePopupData,
								visible: false,
							})
						}
					/>
				</div>
			</Popup>
		);
	};

	const renderCodePopup = () => {
		return (
			<Popup visible={codePopupData && codePopupData.visible} position="bottom" className={bem('code-container')}>
				<div className={bem('volume-code')}>
					<Icon
						onClick={() =>
							setCodePopupData({
								...codePopupData,
								visible: false,
							})
						}
						className={bem('volume-code-icon')}
						size="0.8rem"
						name="close-o"
					/>
					<div className={bem('volume-code-title')}>请将此条码出示给收银员扫描</div>
					<div className={bem('volume-code-sketch')}>{volumeCodeData?.title}</div>
					<Barcode
						className={bem('js-barcode')}
						value={volumeCodeData?.couponNumber}
						options={{ format: 'code128' }}
						renderer="image"
					/>
					<div className={bem('volume-code-rule')}>
						<p>兑券规则</p>
						<div className={bem('volume-code-text')}>
							{couponsRuleContent.map((line, idx) => (
								<p key={idx}>{line}</p>
							))}
						</div>
					</div>
				</div>
			</Popup>
		);
	};

	return (
		<div
			className={bem()}
			style={
				pageStatus === 'game' || pageStatus === 'address'
					? {
							backgroundImage: `url('${pageData?.activityData.bgImg}')`,
							backgroundColor: `${pageData?.activityData.bgColor}`,
					  }
					: { backgroundColor: `#FFFFFF` }
			}
		>
			<div className={bem('store')}>
				{/* <div className={currentStore?.label ? bem('current-store') : ''}>{currentStore?.label}</div> */}
				<div className={bem('selected-store')}>
					<Popup.Select<string[]>
						round
						overlayCloseable
						visible={storeCascader}
						select={
							<Cascader<YunPosRaffle.AreaTreeNode>
								title="选择区域"
								activeColor="#e60012"
								data={pageData?.areaTree}
								// data={pageData?.areaTree}
								dataNames={{
									label: ['attrs', 'label'],
									value: ['attrs', 'no'],
								}}
								onConfirm={(_, options) => {
									setCurrentStore(options[options.length - 1].attrs);
									setStoreCascader(false);
								}}
								onCancel={() => {
									setStoreCascader(false);
								}}
								closeIcon={currentStore ? null : <div></div>}
							/>
						}
					>
						{/* <div onClick={() => setStoreCascader(true)}>切换活动门店</div>; */}
					</Popup.Select>
				</div>
			</div>
			{pageStatus === 'login' && renderLoginView()}
			{pageStatus === 'game' && (
				<WheelGamePage
					selectKey={selectKey}
					prizeData={pageData?.activityData}
					gameData={{
						drawTimes: drawTimes, //'nrCodeData?.drawTimes',
						storeName: currentStore?.label,
						cardId: loginData?.cardId,
					}}
					onLuckDraw={handleLuckDraw}
					onCheckPrize={handleCheckPrize}
					onViewPrize={handleViewPrize}
					onViewRule={() => setRulePopupData({ visible: true, title: '活动规则' })}
					onChangeStore={() => setStoreCascader(true)}
				></WheelGamePage>
			)}
			{pageStatus === 'address' && renderInfo()}
			{renderAwardPopup()}
			{renderPrizePopup()}
			{renderThanksPopup()}
			{renderRulePopup()}
			{renderCodePopup()}
		</div>
	);
});

YunPosGamePage.displayName = 'YunPosGamePage';

export default YunPosGamePage; -->
